<%
    const linkPrefix = systemConfig.prefixFrontend + `/auth/`;
%>

<% if (pageTitle != 'ERROR PAGE') { %>
<nav class="navbar navbar-expand-md navbar-dark mynav sticky-top">
    <a class="navbar-brand ml-lg-4" href="#"><img src="frontend/img/logo.jpg" alt="logo"></a>
    <button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#collapsibleNavId"
        aria-controls="collapsibleNavId" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="collapsibleNavId">
        <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
            <li class="nav-item dropdown <%= (pageTitle == 'home') ? 'active' : '' %> mr-lg-2">
                <a class="nav-link" href="/" aria-haspopup="true"
                    aria-expanded="false">Home</a>
            </li>
            <li class="nav-item dropdown <%= (pageTitle == 'Điện thoại' || pageTitle == 'Máy tính bảng') ? 'active' : '' %> mr-lg-2">
                <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false">Mobile</a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="/categories/dien-thoai">Điện thoại</a>
                    <a class="dropdown-item" href="/categories/may-tinh-bang">Máy tính bảng</a>
                </div>
            </li>
            <li class="nav-item dropdown <%= (pageTitle == 'Digital marketting' || pageTitle == 'Media') ? 'active' : '' %> mr-lg-2">
                <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false">Internet</a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="/categories/digital-marketting">Digital marketting</a>
                    <a class="dropdown-item" href="/categories/media">Media</a>
                </div>
            </li>
            <li class="nav-item dropdown <%= (pageTitle == 'Lịch sử' || pageTitle == 'Tri thức') ? 'active' : '' %> mr-lg-2">
                <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false">Khám phá</a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="/categories/lich-su">Lịch sử</a>
                    <a class="dropdown-item" href="/categories/tri-thuc">Tri thức</a>
                </div>
            </li>
            <li class="nav-item dropdown <%= (pageTitle == 'Tản mạn' || pageTitle == 'Ý tưởng sáng tạo') ? 'active' : '' %> mr-lg-2">
                <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false">Trà đá công nghệ</a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="/categories/tan-man">Tản mạn</a>
                    <a class="dropdown-item" href="/categories/y-tuong-sang-tao">Ý tưởng sáng tạo</a>
                </div>
            </li>
            <li class="nav-item dropdown <%= (pageTitle == 'Sống' || pageTitle == 'Thủ thuật') ? 'active' : '' %> mr-lg-2">
                <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false">Khác</a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="/categories/song">Sống</a>
                    <a class="dropdown-item" href="/categories/thu-thuat">Thủ thuật</a>
                </div>
            </li>
            <li class="nav-item mr-lg-2 d-flex align-items-center">
                <a class="align-center nav-link search-toggle" onclick="showSearchBar()"><i
                        class="fas fa-search"></i></a>
            </li>

            <% if (Object.keys(userInfo).length == 0) { %>
                <li class="nav-item mr-lg-2 d-flex align-items-center">
                    <a href="/auth/login" class="nav-link" title="Đăng nhập"><i class="fas fa-sign-in-alt mr-2"></i><span class="d-inline d-sm-inline d-md-none d-lg-none d-xl-inline">Đăng nhập</span></a>    
                </li>
                <li class="nav-item mr-lg-2 d-flex align-items-center">
                    <a href="/auth/register" class="nav-link" title="Đăng kí"><i class="fas fa-user-edit mr-2"></i><span class="d-inline d-sm-inline d-md-none d-lg-none d-xl-inline">Đăng kí</span></a>
                </li>
            <% } else { %>
                <li class="nav-item mr-lg-2 d-flex align-items-center dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" title="Tài khoản"><i
                            class="fas fa-user-circle mr-2"></i></a>
                    <div class="dropdown-menu dropdown-menu-right">
                        <a class="dropdown-item" href="<%= linkPrefix %>info">Xem thông tin</a>
                        <% if (userInfo.position == 'Phóng viên') { %>
                            <a class="dropdown-item" href="/writer">Quản lý</a>
                        <% } if (userInfo.position == 'Biên tập viên') { %>
                            <a class="dropdown-item" href="/editor">Quản lý</a>
                        <% } if (userInfo.position == 'Quản trị viên') { %>
                            <a class="dropdown-item" href="/administrator">Quản lý</a>
                        <% } %>
                        <a class="dropdown-item" href="<%= linkPrefix %>logout">Đăng xuất</a>
                    </div>
                </li>
            <% } %> 
        </ul>
    </div>

</nav>

<div id="search-bar" style="width: 100%;">
    <div class="input-group container-fluid mt-2">
        <form action="/search" method="get">
            <input class="form-control form-inline" type="text" name="keyword" placeholder="Search">
            <div class="input-group-append"> 
                <button class="btn btn-success m-0 search-button" type="submit"><i class="fas fa-search"></i></button>
            </div>
        </form>
    </div>
</div>

<% } %>